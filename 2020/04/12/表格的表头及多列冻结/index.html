<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>表格的表头及多列冻结 - Sorzen</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/Sorzen"><span>Github</span></a></li><li><a href="https://juejin.im/user/57b6e96ba34131005f86ba5d"><span>掘金</span></a></li><li><a href="/about/resume.html"><span>关于作者</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="/images/postBackground.jpg"><div class="post-title"><h1 class="title">表格的表头及多列冻结</h1><ul class="meta"><li><i class="icon icon-author"></i>Sorzen</li><li><i class="icon icon-clock"></i>24 Minutes</li><li><i class="icon icon-calendar"></i>April 12, 2020</li></ul></div></div><div class="article-content" style="max-width:800px;"><h2 id="一、什么是表格冻结"><a href="#一、什么是表格冻结" class="headerlink" title="一、什么是表格冻结"></a>一、什么是表格冻结</h2><p>当数据较多时将某些行列进行冻结，即固定在某一位置展示，比如当数据较多时，表头可以固定在首行展示，不受滚动影响。由于项目中表格及交叉透视表的功能已经实现，因此只能在原来基础上进行功能的改造，因此需要在原来表格基础上添加表头及多列冻结。</p>
<a id="more"></a>
<h2 id="二、实现方案"><a href="#二、实现方案" class="headerlink" title="二、实现方案"></a>二、实现方案</h2><ul>
<li>方案一 两个表格拼凑<br>第一个表格展示头部和固定行 第二个表格展示其它数据 示意图如下</li>
</ul>
<p><img src="/2020/04/12/表格的表头及多列冻结/layout-1.jpeg" alt="avatar"></p>
<p>优点：固定行数没有限制</p>
<p>缺点：适用场景，仅横向 纵向均无滚动条时可用</p>
<p>若有横向滚动条，两个表格的滚动条是分开的，会出现滚动 A B 不动，或滚动 B A 不动的情况，Windows 下会展示两个横向滚动条，不美观</p>
<p>若有纵向滚动条，在 Windows 下滚动条是默认有宽度的，滚动条的宽占用了表格 B 的部分宽度，导致表头和表主体列错位，示意图如下<br><img src="/2020/04/12/表格的表头及多列冻结/layout-2.jpeg" alt="avatar"></p>
<ul>
<li>方案二 修改表格样式 将合并行上移<br>ElementUI 的 Table 有合并行这个功能，合并行位于 footer 中，固定在表格底部，即使 body 有横向或纵向滚动，样式和功能都已经优化好了。示意图如下<br><img src="/2020/04/12/表格的表头及多列冻结/layout-3.jpeg" alt="avatar"></li>
</ul>
<p>要做的就是把样式调整成我们想要的，使用定位把 footer 放到 header 下，body 向下移一行的距离即可。</p>
<h2 id="三、初步实现表格冻结"><a href="#三、初步实现表格冻结" class="headerlink" title="三、初步实现表格冻结"></a>三、初步实现表格冻结</h2><p>1、表头和首列冻结功能设置入口<br>在表格编辑的右边控制面板 → 高级中增加表格表头和首列冻结设置项</p>
<p><img src="/2020/04/12/表格的表头及多列冻结/setting.png" alt="avatar"></p>
<p>2、表头和首列冻结实现<br>sugar 中表格分为简单表格和交叉透视表，因此实现冻结需要满足两种表格要求，而且需要不影响之前表格布局和样式情况下，进行冻结功能添加。</p>
<p>（一）监听表格滚动<br>通过监听表格滚动，当滚动条滚动时并且表头固定设置打开时，此时应该固定 thead 位置，但是由于 thead 会随滚动条滚动，此时可以用 div 模拟 thead 进行定位在顶部。</p>
<p><img src="/2020/04/12/表格的表头及多列冻结/code-content-1.jpeg" alt="avatar"></p>
<center> 图（一）</center>


<center> 图（二) </center>

<p>图一通过 div 模拟 thead 固定在表格顶部，但是 thead 每个单元格宽度如何完美呈现在模拟 thead 的 div 中呢？</p>
<p>（二）表格信息记录</p>
<p>通过查找 thead 元素，并将表格每行及每列的宽高、边框大小、背景颜色等信息进行记录，然后在用 div 进行模拟时，根据记录的数据设置每行每列样式，做到与原表格样式一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">if</span> (<span class="keyword">this</span>.refs.theVeryTable &amp;&amp; <span class="keyword">this</span>.dom) &#123;</span><br><span class="line">     <span class="keyword">let</span> fixedThs = (<span class="keyword">this</span>.refs.theVeryTable <span class="keyword">as</span> HTMLElement).getElementsByTagName(<span class="string">'th'</span>);</span><br><span class="line">     <span class="keyword">let</span> superHeaderThSizeArr = [];</span><br><span class="line">     <span class="keyword">let</span> tableContainerWidth = (<span class="keyword">this</span>.refs.tableContainer <span class="keyword">as</span> HTMLElement).clientWidth;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; fixedThs.length; i++) &#123;</span><br><span class="line">       superHeaderThSizeArr.push([</span><br><span class="line">         fixedThs[i].clientWidth + fixedThs[i].clientLeft,</span><br><span class="line">         fixedThs[i].clientHeight + fixedThs[i].clientTop,</span><br><span class="line">         fixedThs[i].clientLeft,</span><br><span class="line">         fixedThs[i].clientTop</span><br><span class="line">       ]);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (</span><br><span class="line">       <span class="built_in">JSON</span>.stringify(superHeaderThSizeArr) !== <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.state.superHeaderThSizeArr) ||</span><br><span class="line">       tableContainerWidth !== <span class="keyword">this</span>.state.tableContainerWidth</span><br><span class="line">     ) &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">         superHeaderThSizeArr</span><br><span class="line">       &#125;);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;superHeaders.map(<span class="function">(<span class="params">headerItem: PlainObject[], headerIndex: number</span>) =&gt;</span> &#123;</span><br><span class="line">                 <span class="keyword">return</span> (</span><br><span class="line">                   &lt;div key=&#123;headerIndex&#125;&gt;</span><br><span class="line">                     &#123;headerItem &amp;&amp; headerItem.map</span><br><span class="line">                       ? headerItem.map(<span class="function">(<span class="params">headerTr: PlainObject, headerTrIndex: number</span>) =&gt;</span> &#123;</span><br><span class="line">                           <span class="keyword">const</span> thStyle: PlainObject = &#123;</span><br><span class="line">                             width: <span class="keyword">this</span>.state.superHeaderThSizeArr[headerTrIndex][<span class="number">0</span>],</span><br><span class="line">                             height: <span class="keyword">this</span>.state.superHeaderThSizeArr[headerTrIndex][<span class="number">1</span>],</span><br><span class="line">                             borderLeft: <span class="keyword">this</span>.state.superHeaderThSizeArr[headerTrIndex][<span class="number">2</span>]</span><br><span class="line">                               ? <span class="keyword">this</span>.state.superHeaderThSizeArr[headerTrIndex][<span class="number">2</span>] + <span class="string">`px solid <span class="subst">$&#123;_lineColor&#125;</span>`</span></span><br><span class="line">                               : <span class="number">0</span>,</span><br><span class="line">                             <span class="comment">// padding: '8px 12px',</span></span><br><span class="line">                             borderBottom: <span class="string">'1px solid #e8e8e8'</span>,</span><br><span class="line">                             display: <span class="string">'inline-block'</span>,</span><br><span class="line">                             fontSize: <span class="number">1</span> + <span class="built_in">parseInt</span>(config.fontSize || <span class="number">13</span>, <span class="number">10</span>),</span><br><span class="line">                             padding: <span class="string">`<span class="subst">$&#123;config.paddingTB || <span class="number">8</span>&#125;</span>px <span class="subst">$&#123;config.paddingLR || <span class="number">12</span>&#125;</span>px`</span>,</span><br><span class="line">                             float: <span class="string">'left'</span>,</span><br><span class="line">                             fontWeight: <span class="string">'bold'</span></span><br><span class="line">                           &#125;;</span><br><span class="line">                           <span class="comment">// 当某一项超级表头的name是undefined时，将底边框设置为和表头一样的背景色，从而来模拟合并单元格的情况</span></span><br><span class="line">                           <span class="keyword">if</span> (headerTr[<span class="string">'name'</span>] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">                             thStyle.borderBottom = <span class="string">`solid 1px <span class="subst">$&#123;_titleBg&#125;</span>`</span>;</span><br><span class="line">                           &#125;</span><br><span class="line">                           <span class="keyword">return</span> headerTr[<span class="string">'colspan'</span>] &gt; <span class="number">0</span> ? (</span><br><span class="line">                             &lt;div</span><br><span class="line">                               key=&#123;headerTrIndex&#125;</span><br><span class="line">                               style=&#123;thStyle&#125;</span><br><span class="line">                             &gt;</span><br><span class="line">                               &#123;headerTr[<span class="string">'name'</span>]&#125;</span><br><span class="line">                             &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">                           ) : null;</span></span><br><span class="line"><span class="regexp">                         &#125;)</span></span><br><span class="line"><span class="regexp">                       : null&#125;</span></span><br><span class="line"><span class="regexp">                   &lt;/</span>div&gt;</span><br><span class="line">                 );</span><br><span class="line">               &#125;)&#125;</span><br></pre></td></tr></table></figure>
<p>虽然样式一致，但是当表格内容过多时，页面需要滚动，如何做到模拟的 thead 与 thead 一致随着页面滚动呢？</p>
<p>（三）监听表格页面滚动<br>当固定首列时，页面内容滚动时，模拟的首列信息需要跟着滚动，因此需要监听页面的滚动，然后根据表格滚动的 scrollTop 信息，将模拟的表格列进行定位，已到达模拟滚动的效果，为了防止页面卡顿可以加入防抖操作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">tableScroll() &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123;</span><br><span class="line">     chart: &#123;config&#125;</span><br><span class="line">   &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">this</span>.refs.normalHeader) &#123;</span><br><span class="line">     <span class="comment">// 获取下页面滚动高度</span></span><br><span class="line">     <span class="keyword">let</span> scorllTop;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.props.mode === <span class="string">'editor'</span>) &#123;</span><br><span class="line">       <span class="keyword">let</span> editor = <span class="built_in">document</span>.getElementById(<span class="string">'editor-body'</span>);</span><br><span class="line">       scorllTop = editor ? editor.scrollTop + <span class="keyword">this</span>.headerHeight : <span class="number">0</span>;</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       scorllTop =</span><br><span class="line">         (<span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop || <span class="built_in">window</span>.pageYOffset) + <span class="keyword">this</span>.headerHeight;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="comment">// 表格顶部相对页面顶部的差距</span></span><br><span class="line">     <span class="keyword">let</span> tableHeaderOffset = scorllTop - <span class="keyword">this</span>.offset(<span class="keyword">this</span>.refs.normalHeader);</span><br><span class="line">     <span class="keyword">let</span> height = <span class="built_in">Math</span>.min(<span class="keyword">this</span>.dom.clientHeight, (<span class="keyword">this</span>.refs.theVeryTable <span class="keyword">as</span> HTMLElement).offsetHeight);</span><br><span class="line">     <span class="comment">// console.log('scorllTop:'+scorllTop)</span></span><br><span class="line">     <span class="comment">// console.log('tableHeaderOffset:'+tableHeaderOffset)</span></span><br><span class="line">     <span class="comment">// console.log('height:'+height)</span></span><br><span class="line">     <span class="comment">// console.log('tableContainer:'+(this.refs.tableContainer as HTMLElement).scrollTop)</span></span><br><span class="line">     <span class="keyword">const</span> tableContainerScrollTop = (<span class="keyword">this</span>.refs.tableContainer <span class="keyword">as</span> HTMLElement).scrollTop;</span><br><span class="line">     <span class="keyword">const</span> normalHeaderHeight = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'normalHeader'</span>) &amp;&amp; <span class="built_in">document</span>.getElementsByClassName(<span class="string">'normalHeader'</span>)[<span class="number">0</span>].clientHeight;</span><br><span class="line">     <span class="comment">// 是否需要将表头固定在文档顶部</span></span><br><span class="line">     <span class="keyword">if</span> (tableHeaderOffset &lt; <span class="number">0</span> || (height - <span class="number">100</span> - tableHeaderOffset &lt; <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.state.tableShow)) &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">         tableShow: <span class="literal">false</span></span><br><span class="line">       &#125;);</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tableHeaderOffset &gt;= <span class="number">0</span> &amp;&amp; height - <span class="number">100</span> - tableHeaderOffset &gt;= <span class="number">0</span> &amp;&amp; !<span class="keyword">this</span>.state.tableShow) &#123;</span><br><span class="line">       <span class="keyword">if</span> (config.fix &amp;&amp; config.fix.includes(<span class="string">'fixedHeader'</span>) &amp;&amp; tableContainerScrollTop &gt; normalHeaderHeight) &#123;</span><br><span class="line">         <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">           tableShow: <span class="literal">true</span></span><br><span class="line">         &#125;);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 是否需要将表头固定在表格顶部</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.dom.scrollTop &gt; (<span class="keyword">this</span>.refs.normalHeader <span class="keyword">as</span> HTMLElement).offsetTop &amp;&amp; !<span class="keyword">this</span>.state.showFixedDiv) &#123;</span><br><span class="line">       <span class="keyword">if</span> (config.fix &amp;&amp; config.fix.includes(<span class="string">'fixedHeader'</span>)) &#123;</span><br><span class="line">         <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">           showFixedDiv: <span class="literal">true</span></span><br><span class="line">         &#125;);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">           showFixedDiv: <span class="literal">false</span></span><br><span class="line">         &#125;);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.dom.scrollTop &lt;= (<span class="keyword">this</span>.refs.normalHeader <span class="keyword">as</span> HTMLElement).offsetTop &amp;&amp; <span class="keyword">this</span>.state.showFixedDiv) &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">         showFixedDiv: <span class="literal">false</span></span><br><span class="line">       &#125;);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.dom.scrollLeft !== <span class="keyword">this</span>.state.scrollLeft) &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">         scrollLeft: <span class="keyword">this</span>.dom.scrollLeft</span><br><span class="line">       &#125;);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">// console.log('this.dom.scrollTop:'+this.dom.scrollTop)</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.dom.scrollTop !== <span class="keyword">this</span>.state.scrollTop) &#123;</span><br><span class="line">       <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">         scrollTop: <span class="keyword">this</span>.dom.scrollTop</span><br><span class="line">       &#125;);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="四、最后实现方案"><a href="#四、最后实现方案" class="headerlink" title="四、最后实现方案"></a>四、最后实现方案</h2><p>（1）固定行列实现</p>
<p>由于 sugar 中的 table 可能需要固定表头同时并固定列，这样需要三个相同表格来覆盖展示，不是太有好，因此使用 div 模拟的形式去处理，减少了不必要的数据渲染。</p>
<p>div 模拟普通表格时比较简单，当模拟交叉透视表，出现行列合并时，很容易出现排列错误问题。</p>
<p>因此通过模拟 table 中行列布局形式去实现：</p>
<p>1、让每一行有固定高度，防止没内容时导致错位</p>
<p>2、通过 flex 形式对行内元素进行布局，因为固定的列最后一列肯定有元素，因此采用</p>
<p>justify-content：’flex-end’形式去布局页面，每行元素从后往前一次排列，通过固定宽高自动将元素挤到固定位置<br>3、通过遍历表头元素已经记录表格的宽高信息，通过遍历 tbody 的 tr 记录行的高度（交叉透视表时主要记录普通表头宽高，超级透视表中固定列宽度主要是： 1、colspan &lt; 固定列宽度时，当前所在列宽度 + 向后固定列数个普通表头宽度）</p>
<p>固定列的元素宽高如何计算</p>
<p><1>通过列的 rowspan 计算固定列元素的宽高计算</1></p>
<pre><code>当前列元素高度 = 当前行高度 + 从当前行高度向后rowspan个行的高度

当前列元素宽度 = 当前元素所在列宽度 + 从当前列宽度向后colspan个列宽度，但是当固定的列小于colspan时，当前所在列宽度 + 向后固定列数个普通表头宽度
</code></pre><p>风险：由于不同浏览器下可能会有 1px 偏差，导致 div 模拟的行列可能会发生错乱。</p>
<p><2> 为了防止出现不同浏览器下可能出现错位风险，因此改为用 table 去模拟固定行列，这样可以通过 colspan 和 rowspan 去计算宽高，减少了页面渲染时的计算问题，也优化了一些性能。</2></p>
<p>4、页面滚动</p>
<p><1>通过设置 scrollTop 进行上下移动，scrollLeft 进行左右移动</1></p>
<p>问题：由于内容滚动时左右固定列也需要滚动，左右列滚动时内容也需要滚动，因为会造成 scroll 事件的互相触发，造成滚动时页面跳动，并造成页面卡顿。</p>
<p>解决办法：使用模拟滚动条来解决 scroll 事件互相触发问题（如：better-scroll、perfect-scrollbar）</p>
<p>5、优化滚动</p>
<p><1>由于 react 自身原因，在页面滚动时最好不要进行 setState 操作，防止页面的 diff 过程，并且防止当存在 componentDidUpdate 时，频繁触发 componentDidUpdate 内操作</1></p>
<p><2>不要进行大量的计算，防止在滚动时，出现大量计算，阻塞页面渲染造成页面卡顿</2></p>
<p><3>滚动时加入防抖</3></p>
<p><img src="/2020/04/12/表格的表头及多列冻结/table.jpeg" alt="avatar"></p>
</div><div class="article-meta" style="max-width:800px;"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/table-react/">table react</a><span class="tag-list-count">1</span></li></ul></div></div><div class="article-comment" style="max-width:800px;"><div class="ds-thread" id="ds-thread" data-thread-key="ck8wvi9vd000ie9s6sckt45x8" data-title="表格的表头及多列冻结" data-url="http://yoursite.com/2020/04/12/表格的表头及多列冻结/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2020/04/12/了解进程/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2019/04/11/pm2在项目中的初次尝试/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/Sorzen" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://juejin.im/user/57b6e96ba34131005f86ba5d" title="掘金" target="_blank"><i class="icon icon-juejin"></i></a></li><li><a href="https://segmentfault.com/" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2020 Sorzen<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script><script src="/live2d-widget/autoload.js"></script></body></html>